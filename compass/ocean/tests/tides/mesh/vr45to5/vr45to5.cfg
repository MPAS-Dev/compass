# options for spherical meshes
[spherical_mesh]

## config options related to the step for culling land from the mesh
# number of cores to use
cull_mesh_cpus_per_task = 18
# minimum of cores, below which the step fails
cull_mesh_min_cpus_per_task = 1
# maximum memory usage allowed (in MB)
cull_mesh_max_memory = 1000

# for icosahedral meshes, whether to use cell_width to determine the number of
# subdivisions or to use subdivisions directly
icosahedral_method = subdivisions
# Whether to convert the culled mesh file to CDF5 format
convert_culled_mesh_to_cdf5 = False
# Minimum latitude, in degrees, for masking land-locked cells
latitude_threshold = 43.0
# Maximum number of sweeps to search for land-locked cells
sweep_count = 20


# options for global ocean testcases
[global_ocean]

# The following options are detected from .gitconfig if not explicitly entered
author = autodetect
email = autodetect

[vertical_grid]

grid_type = uniform
vert_levels = 1
bottom_depth = 12000
min_depth = 0.1


# options for tides testcases
[tides]

## config options related to the initial_state step
# number of cores to use
init_ntasks = 36
# minimum of cores, below which the step fails
init_min_tasks = 8
# maximum memory usage allowed (in MB)
init_max_memory = 1000
# number of threads
init_threads = 1

## config options related to the forward steps
# number of cores to use
forward_ntasks = 1024
# minimum of cores, below which the step fails
forward_min_tasks = 1024
# maximum memory usage allowed (in MB)
forward_max_memory = 1000
# number of threads
forward_threads = 1

# TPXO version for validation
tpxo_version = TPXO9

# constituents to validate
constituents = k1, k2, m2, n2, o1, p1, q1, s2

# config options related to remapping topography to an MPAS-Ocean mesh
[remap_topography]

# the name of the topography file in the bathymetry database
topo_filename = BedMachineAntarctica_v3_and_GEBCO_2023_0.0125_degree_20240828.nc

# variable names in topo_filename
lon_var = lon
lat_var = lat
bathymetry_var = bathymetry
ice_thickness_var = thickness
ice_frac_var = ice_mask
grounded_ice_frac_var = grounded_mask
ocean_frac_var = ocean_mask
bathy_frac_var = bathymetry_mask

# the description to include in metadata
description = Bathymetry is from GEBCO 2023, combined with BedMachine
              Antarctica v3 around Antarctica.

# the target and minimum number of MPI tasks to use in remapping
ntasks = 4096
min_tasks = 360

# remapping method {'bilinear', 'neareststod', 'conserve'}
method = conserve

# threshold of what fraction of an MPAS cell must contain ocean in order to
# perform renormalization of elevation variables
renorm_threshold = 0.01

# the density of land ice from MALI (kg/m^3)
ice_density = 910.0
