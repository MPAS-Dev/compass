

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>driver_script &mdash; COMPASS stable documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="template" href="template.html" />
    <link rel="prev" title="config" href="config.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> COMPASS
          

          
          </a>

          
            
            
              <div class="version">
                stable
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="details.html">Details</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config.html">config</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">driver_script</a></li>
<li class="toctree-l2"><a class="reference internal" href="template.html">template</a></li>
<li class="toctree-l2"><a class="reference internal" href="regression_suite.html">regression_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_config.html">run_config</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocean.html">COMPASS for ocean test case</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocean_testcases/index.html">Ocean Test Cases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">COMPASS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="details.html">Details</a> &raquo;</li>
        
      <li>driver_script</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/driver_script.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="driver-script">
<span id="compass-driver-script"></span><h1>driver_script<a class="headerlink" href="#driver-script" title="Permalink to this headline">Â¶</a></h1>
<p>A <code class="docutils literal notranslate"><span class="pre">driver_script</span></code> file is used to generate a driver script that can be used to
automate several steps, including running multiple cases, and comparing output.
This file contains information describing how to create a script
that can be used to perform multiple steps in the process of running a test.
This includes running multiple run scripts within case directories, or
performing standard actions, such as comparing multiple output files.</p>
<p>Below, you will see text describing the various XML tags available in a
<code class="docutils literal notranslate"><span class="pre">driver_script</span></code> file. Each will describe the tag itself, any attributes the
tag can have, and what children can be placed below the tag.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;driver_script&gt;</span></code> - This tag defines a driver script for a set of case directories.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the driver script that will be generated</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;case&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;step&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;define_env_var&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;validation&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;case&gt;</span></code> - This tag defines the case that will be used for part of a driver
script. It implies the driver script should <code class="docutils literal notranslate"><span class="pre">cd</span></code> into the case
directory before executing the steps and arguments defined within.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the case directory that will be used for this
portion of the driver script.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;step&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;define_env_var&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;step&gt;</span></code> - This tag defines a step in a driver script</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">executable</span></code>: The base executable for this step of the script. e.g.
test_model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">executable_name</span></code>: The name of the executable that has been defined
in the configuration file to be used for this step of the script.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;argument&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;argument&gt;</span></code> - This tag defines arguments for the executable in a specific step of
a script.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">flag</span></code>: A flag that will come before the argument. e.g. <code class="docutils literal notranslate"><span class="pre">-n</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Text:</dt><dd><ul>
<li><p>The text between the <code class="docutils literal notranslate"><span class="pre">&lt;argument&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;/argument&gt;</span></code> tags will be
used as the argument after the flag. In the example <code class="docutils literal notranslate"><span class="pre">mpirun</span> <span class="pre">-np</span> <span class="pre">4</span></code>
the flag would be <code class="docutils literal notranslate"><span class="pre">-np</span></code>, and the text would be <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;define_env_var&gt;</span></code> - This tag is used to define an environment variable which
might be needed when running the model. For example,
setting the value of <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> to ensure OpenMP
threading is used.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the variable that will be set</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: The value that will be given to the variable</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;validation&gt;</span></code> - This tag is used to define a block of validations that should
happen within the driver script. These validations are standard
operations that multiple driver scripts can use easily, such as
comparing fields in multiple files or against baselines. Test
case specific validations might happen in separate steps.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;compare_fields&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;compare_timers&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;compare_fields&gt;</span></code> - This tag is used to define a comparison of specified
fields in two NetCDF files.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">file1</span></code>: This defines the first file in the comparison.
Relative to the <code class="docutils literal notranslate"><span class="pre">&lt;core&gt;/&lt;configuration&gt;/&lt;resolution&gt;</span></code> directory.
Will also cause file1 to be compared against file1 in the baseline directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file2</span></code>: This defines the second file in the comparison.
Relative to the <code class="docutils literal notranslate"><span class="pre">&lt;core&gt;/&lt;configuration&gt;/&lt;resolution&gt;</span></code> directory.
Will also cause file2 to be compared against file2 in the baseline directory.</p></li>
<li><p>NOTE: If only one of file1 or file2 is specified, the testcase will
only compare against baselines.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;field&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;field&gt;</span></code> - This tag is used to define a field that will be compared within a
<code class="docutils literal notranslate"><span class="pre">&lt;compare_fields&gt;</span></code> tag. Any norm thresholds that are specified all must pass to
have the comparison pass.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: This attribute defines the name of the field that will be compared</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l1_norm</span></code>: This attribute defines the threshold for an L1 norm, to
define a pass. If not specified, the L1 norm will not be used in
determining if the comparison passes or fails.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l2_norm</span></code>: This attribute defines the threshold for an L2 norm, to
define a pass. If not specified, the L2 norm will not be used in
determining if the comparison passes or fails.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linf_norm</span></code>: This attribute defines the threshold for an L-Infinity norm, to
define a pass. If not specified, the L-Infinity norm will not be used in
determining if the comparison passes or fails.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code> - This tag defines a template that should be applied to define a list of field comparisions.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code>: The file that contains the template that should be expanded here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path_base</span></code>: The base that the path attribute should be used relative
to. Can be a pre-defined paths (see <a class="reference internal" href="config.html#compass-config"><span class="std std-ref">config</span></a>)</p></li>
<li><p>path: The path that the file lives in, relative to path_base.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;compare_timers&gt;</span></code> - This tag is used to define a comparison of timers in two run directories.
The comparison will work with native or gptl timers automatically.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rundir1</span></code>: This is the first run directory to compare. If it is the
only one specified timers in it will be compared only against itâs
baseline.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rundir2</span></code>: This is the second run directory to compare. If it is the
only one specified timers in it will be compared only against itâs
baseline.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Children:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;timer&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;timer&gt;</span></code> - This tag is used to define a timer that should be compared between two run directories.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Attributes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: This is the name of the timer to compare. It should be the full
expected name of the timer, not the printed name from the timer
library.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="template.html" class="btn btn-neutral float-right" title="template" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config.html" class="btn btn-neutral float-left" title="config" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Copyright (c) 2013-2020,  Los Alamos National Security, LLC (LANS) (Ocean: LA-CC-13-047;Land Ice: LA-CC-13-117) and the University Corporation for Atmospheric Research (UCAR).

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>