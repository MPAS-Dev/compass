

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ismip6_run &mdash; compass latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="isunnguata_sermia" href="isunnguata_sermia.html" />
    <link rel="prev" title="ismip6_forcing" href="ismip6_forcing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            compass
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/test_cases.html">Test Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/test_suites.html">Test Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/landice/index.html">Landice core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../organization.html">Organization of Tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Landice core</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Test groups</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="antarctica.html">antarctica</a></li>
<li class="toctree-l3"><a class="reference internal" href="calving_dt_convergence.html">calving_dt_convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="circular_shelf.html">circular_shelf</a></li>
<li class="toctree-l3"><a class="reference internal" href="crane.html">crane</a></li>
<li class="toctree-l3"><a class="reference internal" href="dome.html">dome</a></li>
<li class="toctree-l3"><a class="reference internal" href="ensemble_generator.html">ensemble_generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="enthalpy_benchmark.html">enthalpy_benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="eismint2.html">eismint2</a></li>
<li class="toctree-l3"><a class="reference internal" href="greenland.html">greenland</a></li>
<li class="toctree-l3"><a class="reference internal" href="humboldt.html">humboldt</a></li>
<li class="toctree-l3"><a class="reference internal" href="hydro_radial.html">hydro_radial</a></li>
<li class="toctree-l3"><a class="reference internal" href="ismip6_forcing.html">ismip6_forcing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ismip6_run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#framework">framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ismip6-ais-proj2300">ismip6_ais_proj2300</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="isunnguata_sermia.html">isunnguata_sermia</a></li>
<li class="toctree-l3"><a class="reference internal" href="kangerlussuaq.html">kangerlussuaq</a></li>
<li class="toctree-l3"><a class="reference internal" href="koge_bugt_s.html">koge_bugt_s</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesh_modifications.html">mesh_modifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="mismipplus.html">mismipplus</a></li>
<li class="toctree-l3"><a class="reference internal" href="thwaites.html">thwaites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework.html">Land-ice Framework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../framework.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_rrm.html">Developer Tutorial: Adding a new ocean/sea ice regionally refined mesh (RRM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_param_study.html">Developer Tutorial: Adding a parameter study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_porting_legacy.html">Developer Tutorial: Porting a legacy COMPASS test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">Code and Documentation Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">compass</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Landice core</a></li>
          <li class="breadcrumb-item"><a href="index.html">Test groups</a></li>
      <li class="breadcrumb-item active">ismip6_run</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/developers_guide/landice/test_groups/ismip6_run.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ismip6-run">
<span id="dev-landice-ismip6-run"></span><h1>ismip6_run<a class="headerlink" href="#ismip6-run" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">ismip6_run</span></code> test group (<code class="xref py py-class docutils literal notranslate"><span class="pre">compass.landice.tests.ismip6_run</span></code>)
sets up experiments from the ISMIP6 experimental protocol.
Additionally, the test group has an option to setup coupled MALI-Sea Level Model (SLM) simulations.
(see <a class="reference internal" href="../../../users_guide/landice/test_groups/ismip6_run.html#landice-ismip6-run"><span class="std std-ref">ismip6_run</span></a>).</p>
<section id="framework">
<h2>framework<a class="headerlink" href="#framework" title="Link to this heading"></a></h2>
<p>There is no shared functionality for the <code class="docutils literal notranslate"><span class="pre">ismip6_run</span></code> test group.
Shared functions may be added if additional test cases are added and the
needed functionality can be generalized.</p>
</section>
<section id="ismip6-ais-proj2300">
<h2>ismip6_ais_proj2300<a class="headerlink" href="#ismip6-ais-proj2300" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/compass.landice.tests.ismip6_run.ismip6_ais_proj2300.Ismip6AisProj2300.html#compass.landice.tests.ismip6_run.ismip6_ais_proj2300.Ismip6AisProj2300" title="compass.landice.tests.ismip6_run.ismip6_ais_proj2300.Ismip6AisProj2300"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.landice.tests.ismip6_run.ismip6_ais_proj2300.Ismip6AisProj2300</span></code></a>
sets up an ensemble of ISMIP6 Antarctica 2300 (standalone MALI and coupled MALI-SLM)
simulations.  The constructor (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>) does nothing other than
allow the <code class="docutils literal notranslate"><span class="pre">ismip6_ais_proj2300</span></code> test case to be listed by <code class="docutils literal notranslate"><span class="pre">compass</span> <span class="pre">list</span></code>
without having all individual experiments listed in a verbose listing.
Each individual experiment is a step rather than a test case to avoid having
excessive subdirectories.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">configure</span></code> method is where the experiments to be set up are determined.
The config option <code class="docutils literal notranslate"><span class="pre">exp_list</span></code> is parsed and each experiment to be included
is set up as a step of the test case by calling the
<code class="docutils literal notranslate"><span class="pre">SetUpExperiment</span></code> constructor (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>).
All of the experiments are removed from <code class="docutils literal notranslate"><span class="pre">steps_to_run</span></code>, because the
experiments (steps) are not meant to be run together through the test
case, which is a contrary design to most compass test cases.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> method of the test case generates an error instructing the user
to submit batch jobs for each experiment individually.</p>
<section id="set-up-experiment">
<h3>set_up_experiment<a class="headerlink" href="#set-up-experiment" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/compass.landice.tests.ismip6_run.ismip6_ais_proj2300.set_up_experiment.SetUpExperiment.html#compass.landice.tests.ismip6_run.ismip6_ais_proj2300.set_up_experiment.SetUpExperiment" title="compass.landice.tests.ismip6_run.ismip6_ais_proj2300.set_up_experiment.SetUpExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.landice.tests.ismip6_run.ismip6_ais_proj2300.set_up_experiment.SetUpExperiment</span></code></a>
defines a step for a single ISMIP6 experiment (model run).  The constructor
(<code class="docutils literal notranslate"><span class="pre">__init__</span></code>) stores the experiment name.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">setup</span></code> method actually sets up an experiment by taking a baseline
configuration and then namelist and streams as necessary to define the ISMIP6
experiment requested.  See the ISMIP6 website for the <a class="reference external" href="https://www.climate-cryosphere.org/wiki/index.php?title=ISMIP6-Projections2300-Antarctica#List_of_Projections">list of experiment
definitions</a>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">graph.info</span></code> file is created for each run.
Additionally, a job script is written for the run so that the run can be
submitted as an independent slurm job.
Finally, a symlink to the compass load script is added to the run work
directory, which compass does not do by default.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> runs MALI for the given experiment. It also builds mapping files
between MALI and the SLM by calling a local method <code class="docutils literal notranslate"><span class="pre">_build_mapping_files</span></code>
if the SLM option in the config file is enabled.</p>
</section>
<section id="important-notes-for-analyzing-coupled-mali-slm-simulations">
<h3>Important notes for analyzing coupled MALI-SLM simulations<a class="headerlink" href="#important-notes-for-analyzing-coupled-mali-slm-simulations" title="Link to this heading"></a></h3>
<p>Currently, MALI uses a planar mesh that projects the south pole with
polar stereographic projection of ellipsoidal Earth, and the sea-level model
uses a global grid of spherical Earth. This inconsistency in the Earth’s
assumed shape (ellipsoid vs. sphere) in MALI and the SLM causes discrepancies
in the comparison of post-simulation ice mass calculations from the model outputs.
To address this issue, an interim solution has been made to project the southern
polar region onto the MALI planar mesh assuming a sphere (this is done by setting
the lat/long in the MALI mesh using the ‘aid-bedmap2-sphere’ projection string in
calling the function in ‘set_lat_lon_fields_in_planar_grid.py’. Thus, the resulting
MALI mesh for coupled MALI-SLM simulations that are setup from this testgroup have
the lat/long values based off sphere. Once the simulation outputs are generated,
it is necessary to calculate and apply the scaling factors to the MALI outputs
to correct for the areal distortion arose from projecting the south pole on a sphere
onto plane. Only after applying the scaling factor, the MALI outputs will be
comparable to the SLM outputs. The equations to calculate the scaling factors are shown in
Eqn. 21-4 in <a class="reference external" href="https://pubs.usgs.gov/pp/1395/report.pdf">https://pubs.usgs.gov/pp/1395/report.pdf</a>
An example of the calculation for the MALI-SLM case can also be found in
the <code class="docutils literal notranslate"><span class="pre">compass</span></code> testgroup/testcase/ <code class="docutils literal notranslate"><span class="pre">compass/landice/test/slm/circ_icesheet/</span></code>,
<code class="docutils literal notranslate"><span class="pre">visualize</span></code> step (<a class="reference external" href="https://github.com/MPAS-Dev/compass/pull/748">https://github.com/MPAS-Dev/compass/pull/748</a>).</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ismip6_forcing.html" class="btn btn-neutral float-left" title="ismip6_forcing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="isunnguata_sermia.html" class="btn btn-neutral float-right" title="isunnguata_sermia" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2013-2021,  Los Alamos National Security, LLC (LANS) (Ocean: LA-CC-13-047;Land Ice: LA-CC-13-117) and the University Corporation for Atmospheric Research (UCAR)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>