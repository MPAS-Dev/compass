

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documentation &mdash; compass latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building the Documentation" href="building_docs.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            compass
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/test_cases.html">Test Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/test_suites.html">Test Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/landice/index.html">Landice core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="organization.html">Organization of Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="landice/index.html">Landice core</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#docstrings">Docstrings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dev_add_rrm.html">Developer Tutorial: Adding a new ocean/sea ice regionally refined mesh (RRM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dev_add_param_study.html">Developer Tutorial: Adding a parameter study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dev_porting_legacy.html">Developer Tutorial: Porting a legacy COMPASS test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Code and Documentation Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">compass</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developers_guide/docs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="documentation">
<span id="dev-docs"></span><h1>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">compass</span></code> documentation is generated using the
<a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> package and is written in
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">reStructuredText</a>
format.  We recommend this <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">basic guide</a>
to reStructuredText in Sphinx.</p>
<p>Another easy way to get started is by taking a look at the existing source
code for the documentation: <a class="reference external" href="https://github.com/MPAS-Dev/compass/tree/main/docs/">https://github.com/MPAS-Dev/compass/tree/main/docs/</a></p>
<p>Each time you add a core, configuration or test case, the corresponding
documentation must be included with the pull request to add the code.  This
includes documentation for both the User’s Guide and the Developer’s Guide.
For examples, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../users_guide/ocean/index.html#ocean"><span class="std std-ref">Ocean core</span></a> in the User’s Guide</p></li>
<li><p><a class="reference internal" href="../users_guide/ocean/test_groups/baroclinic_channel.html#ocean-baroclinic-channel"><span class="std std-ref">baroclinic_channel</span></a> configuration in the User’s Guide</p></li>
<li><p><a class="reference internal" href="ocean/index.html#dev-ocean"><span class="std std-ref">Ocean core</span></a> in the Developer’s Guide</p></li>
<li><p><a class="reference internal" href="ocean/test_groups/baroclinic_channel.html#dev-ocean-baroclinic-channel"><span class="std std-ref">baroclinic_channel</span></a> configuration in the Developer’s Guide</p></li>
</ul>
<p>Documentation for each core in the User’s guide should include a label with the
name of the core:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_ocean:</span>

<span class="gh">Ocean core</span>
<span class="gh">==========</span>

<span class="c">...</span>
</pre></div>
</div>
<p>In the Developer’s Guide, labels have <code class="docutils literal notranslate"><span class="pre">dev_</span></code> prepended to them:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_dev_ocean:</span>

<span class="gh">Ocean core</span>
<span class="gh">==========</span>

<span class="c">...</span>
</pre></div>
</div>
<p>Each configuration should have the core prepended to its label (in case
multiple cores have the same configuration name), and each test case (if
explicitly labeled) should have the core and configuration prepended to it.
Thus, in the User’s guide, we have:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_ocean_baroclinic_channel:</span>

<span class="gh">baroclinic_channel</span>
<span class="gh">==================</span>

<span class="c">...</span>

<span class="p">..</span> <span class="nt">_ocean_baroclinic_channel_default:</span>

<span class="gh">default</span>
<span class="gh">-------</span>
</pre></div>
</div>
<p>And in the Developer’s guide, these become:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_dev_ocean_baroclinic_channel:</span>

<span class="gh">baroclinic_channel</span>
<span class="gh">==================</span>

<span class="c">...</span>

<span class="p">..</span> <span class="nt">_dev_ocean_baroclinic_channel_default:</span>

<span class="gh">default</span>
<span class="gh">-------</span>
</pre></div>
</div>
<p>Documentation for a core, configuration or test case in the User’s Guide
should contain information that is needed for users who set up and run the test
case, including:</p>
<ul class="simple">
<li><p>Documentation for the MPAS core itself (if any)</p></li>
<li><p>A page for each configurations with a section for each test case:</p>
<ul>
<li><p>A citation or link where the configuration is defined (if any)</p></li>
<li><p>A brief overview of the test cases within the configuration</p></li>
<li><p>An image showing typical output from one of the test cases</p></li>
<li><p>A list of (commented) config options that apply to all test cases</p></li>
<li><p>A (typically brief) description of each test case</p></li>
</ul>
</li>
<li><p>A description of any common framework within the core that the configuration
or test case pages may need to refer to.  This should only include framework
that users may need to be aware of, e.g. because of <a class="reference internal" href="../users_guide/config_files.html#config-files"><span class="std std-ref">Config Files</span></a>
or namelist options they may wish to edit.</p></li>
<li><p>A description of each test suite, including which test cases are included</p></li>
</ul>
<p>The Developer’s guide for each core should contain:</p>
<ul class="simple">
<li><p>Relevant technical details about development specific to that core</p></li>
<li><p>A page for each configuration:</p>
<ul>
<li><p>A description of any development-specific details of that configuration</p></li>
<li><p>A description of shared config, namelist and streams files</p></li>
<li><p>A description of shared steps</p></li>
<li><p>A description of any other shared framework code for the configuration</p></li>
<li><p>A description of each test case and its steps</p></li>
</ul>
</li>
<li><p>Technical details on the shared framework for the core</p></li>
</ul>
<p>Finally, all functions in the configuration that are part of the public API
(i.e. all functions that don’t start with an underscore) should be added to
<code class="docutils literal notranslate"><span class="pre">docs/&lt;core&gt;/api.rst</span></code>:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span><span class="gh">baroclinic_channel</span>
<span class="gh">~~~~~~~~~~~~~~~~~~</span>

<span class="p">..</span> <span class="ow">currentmodule</span><span class="p">::</span> compass.ocean.tests.baroclinic_channel

<span class="p">..</span> <span class="ow">autosummary</span><span class="p">::</span>
   <span class="nc">:toctree:</span> generated/

   collect
   configure

   decomp_test.collect
   decomp_test.configure
   decomp_test.run

<span class="c">   ...</span>
</pre></div>
</div>
<p>The Developer’s Guide also contains details on the framework shared across
<code class="docutils literal notranslate"><span class="pre">compass</span></code>, so any updates to this framework should include relevant additions
or modifications ot the documentation.</p>
<section id="docstrings">
<span id="dev-docstrings"></span><h2>Docstrings<a class="headerlink" href="#docstrings" title="Link to this heading"></a></h2>
<p>The Developer’s Guide includes a <a class="reference internal" href="api.html#dev-api"><span class="std std-ref">API reference</span></a> that is automatically generated
from the python code and the <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">docstrings</a>
at the beginning of each function.  <code class="docutils literal notranslate"><span class="pre">compass</span></code> uses docstrings in the
<a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpydoc</a> format.
A typical example looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">compute_land_ice_pressure_and_draft</span><span class="p">(</span><span class="n">ssh</span><span class="p">,</span> <span class="n">modifySSHMask</span><span class="p">,</span> <span class="n">ref_density</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the pressure from and overlying ice shelf and the ice-shelf draft</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ssh : xarray.DataArray</span>
<span class="sd">        The sea surface height (the ice draft)</span>

<span class="sd">    modifySSHMask : xarray.DataArray</span>
<span class="sd">        A mask that is 1 where ``landIcePressure`` can be deviate from 0</span>

<span class="sd">    ref_density : float</span>
<span class="sd">        A reference density for seawater displaced by the ice shelf</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    landIcePressure : xarray.DataArray</span>
<span class="sd">        The pressure from the overlying land ice on the ocean</span>

<span class="sd">    landIceDraft : xarray.DataArray</span>
<span class="sd">        The ice draft, equal to the initial ``ssh``</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The docstring must include a brief description of the function.  Then, it
includes a <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> section with entries for each argument.  The argument
are always given on their own line with the type, separated by `` : `` (note
the spaces on either side of the colon).  The type should not be in code format
(i.e. not in double back-quotes) because this interferes with Sphinx’s ability
to link to the documentation for the type.  In the example above, Sphinx will
automatically find the API reference to <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> within the
<code class="docutils literal notranslate"><span class="pre">xarray</span></code> documentation (which is also written using sphinx).  If an argument
is a keyword argument (i.e. given with <code class="docutils literal notranslate"><span class="pre">arg=value</span></code> in the function
declaration), the type should be followed by <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">optional</span></code>, indicating that
the argument will take on a default value if it is not supplied.</p>
<p>On the next lines after the argument and type, indented by 4 spaces, is a brief
description of the argument.  If the argument is optional and the default value
is not obvious (e.g. <code class="docutils literal notranslate"><span class="pre">arg=None</span></code> is used as an indication that <code class="docutils literal notranslate"><span class="pre">arg</span></code> will be
replaced by something else in the function), it should also be described. If
the default value of the argument is obvious in the function declaration (e.g.
<code class="docutils literal notranslate"><span class="pre">arg=True</span></code>), no further description is necessary.</p>
<p>Finally, if the function returns values, these need to be described in the same
way as the parameters, with the name of the return values followed by a colon
and the type, then a description, indented by 4 spaces.</p>
<p>Other sections such as <code class="docutils literal notranslate"><span class="pre">Raises</span></code> and <code class="docutils literal notranslate"><span class="pre">Examples</span></code> are optional.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="troubleshooting.html" class="btn btn-neutral float-left" title="Troubleshooting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="building_docs.html" class="btn btn-neutral float-right" title="Building the Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2013-2021,  Los Alamos National Security, LLC (LANS) (Ocean: LA-CC-13-047;Land Ice: LA-CC-13-117) and the University Corporation for Atmospheric Research (UCAR)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>