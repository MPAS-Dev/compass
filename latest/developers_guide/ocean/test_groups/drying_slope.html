

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>drying_slope &mdash; compass latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="global_convergence" href="global_convergence.html" />
    <link rel="prev" title="dam_break" href="dam_break.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            compass
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/test_cases.html">Test Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/test_suites.html">Test Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/landice/index.html">Landice core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../organization.html">Organization of Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../landice/index.html">Landice core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean core</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Test groups</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="baroclinic_gyre.html">baroclinic_gyre</a></li>
<li class="toctree-l3"><a class="reference internal" href="buttermilk_bay.html">buttermilk_bay</a></li>
<li class="toctree-l3"><a class="reference internal" href="dam_break.html">dam_break</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">drying_slope</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#framework">framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default">default</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convergence">convergence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decomp">decomp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loglaw">loglaw</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="global_convergence.html">global_convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="global_ocean.html">global_ocean</a></li>
<li class="toctree-l3"><a class="reference internal" href="gotm.html">gotm</a></li>
<li class="toctree-l3"><a class="reference internal" href="hurricane.html">hurricane</a></li>
<li class="toctree-l3"><a class="reference internal" href="ice_shelf_2d.html">ice_shelf_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="isomip_plus.html">isomip_plus</a></li>
<li class="toctree-l3"><a class="reference internal" href="lock_exchange.html">lock_exchange</a></li>
<li class="toctree-l3"><a class="reference internal" href="merry_go_round.html">merry_go_round</a></li>
<li class="toctree-l3"><a class="reference internal" href="nonhydro.html">nonhydro</a></li>
<li class="toctree-l3"><a class="reference internal" href="overflow.html">overflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="parabolic_bowl.html">parabolic_bowl</a></li>
<li class="toctree-l3"><a class="reference internal" href="planar_convergence.html">planar_convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="soma.html">soma</a></li>
<li class="toctree-l3"><a class="reference internal" href="sphere_transport.html">sphere_transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="spherical_harmonic_transform.html">spherical_harmonic_transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="tides.html">tides</a></li>
<li class="toctree-l3"><a class="reference internal" href="utility.html">utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="ziso.html">ziso</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework.html">Ocean framework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../framework.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_rrm.html">Developer Tutorial: Adding a new ocean/sea ice regionally refined mesh (RRM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_param_study.html">Developer Tutorial: Adding a parameter study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_porting_legacy.html">Developer Tutorial: Porting a legacy COMPASS test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">Code and Documentation Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">compass</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean core</a></li>
          <li class="breadcrumb-item"><a href="index.html">Test groups</a></li>
      <li class="breadcrumb-item active">drying_slope</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/developers_guide/ocean/test_groups/drying_slope.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="drying-slope">
<span id="dev-ocean-drying-slope"></span><h1>drying_slope<a class="headerlink" href="#drying-slope" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">drying_slope</span></code> test group
(<a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.DryingSlope.html#compass.ocean.tests.drying_slope.DryingSlope" title="compass.ocean.tests.drying_slope.DryingSlope"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.DryingSlope</span></code></a>)
implements variants of the drying slope test case.  Here,
we describe the shared framework for this test group and the 1 test case.</p>
<section id="framework">
<span id="dev-ocean-drying-slope-framework"></span><h2>framework<a class="headerlink" href="#framework" title="Link to this heading"></a></h2>
<p>The shared config options for the <code class="docutils literal notranslate"><span class="pre">drying_slope</span></code> test group are described
in <a class="reference internal" href="../../../users_guide/ocean/test_groups/drying_slope.html#ocean-drying-slope"><span class="std std-ref">drying_slope</span></a> in the User’s Guide.</p>
<p>Additionally, the test group has shared <code class="docutils literal notranslate"><span class="pre">namelist.init</span></code> and
<code class="docutils literal notranslate"><span class="pre">namelist.forward</span></code> files with a few common namelist options related to run
duration, bottom drag, and tidal forcing options, as well as shared
<code class="docutils literal notranslate"><span class="pre">streams.init</span></code> and <code class="docutils literal notranslate"><span class="pre">streams.forward</span></code> files that defines <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, <code class="docutils literal notranslate"><span class="pre">input</span></code>,
<code class="docutils literal notranslate"><span class="pre">restart</span></code>, <code class="docutils literal notranslate"><span class="pre">forcing</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> streams.</p>
<p>Namelist options specific vertical coordinates are given in
<code class="docutils literal notranslate"><span class="pre">namelist.${COORD}*</span></code> files.</p>
<section id="initial-state">
<h3>initial_state<a class="headerlink" href="#initial-state" title="Link to this heading"></a></h3>
<p>The class
<a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.initial_state.InitialState.html#compass.ocean.tests.drying_slope.initial_state.InitialState" title="compass.ocean.tests.drying_slope.initial_state.InitialState"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.initial_state.InitialState</span></code></a>
defines a step for setting up the initial state for each test case.</p>
<p>First, a mesh appropriate for the resolution is generated using
<a class="reference external" href="http://mpas-dev.github.io/MPAS-Tools/master/generated/mpas_tools.planar_hex.make_planar_hex_mesh.html#mpas_tools.planar_hex.make_planar_hex_mesh" title="(in mpas_tools v0.36.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mpas_tools.planar_hex.make_planar_hex_mesh()</span></code></a>.  Then, the mesh is
culled to remove periodicity in the y direction. The vertical grid is
configured according to the config options in the <code class="docutils literal notranslate"><span class="pre">vertial_grid</span></code> section.
The bottom depth is then set according to config options
<code class="docutils literal notranslate"><span class="pre">right_bottom_depth</span></code> and <code class="docutils literal notranslate"><span class="pre">left_bottom_depth</span></code>. The initial layer
thicknesses are set to the minimum thickness and the initial state is set to
a constant value by default according to the config options
<code class="docutils literal notranslate"><span class="pre">background_temperature</span></code> and <code class="docutils literal notranslate"><span class="pre">background_salinity</span></code>. Optionally, a mass of
warmer water can be initialized over part of the domain, a “plug,” using
config options <code class="docutils literal notranslate"><span class="pre">plug_width_frac</span></code> and <code class="docutils literal notranslate"><span class="pre">plug_width_temperature</span></code>. For current
configurations, tracer tendencies are off and these tracer options do not
affect the flow.</p>
</section>
<section id="forward">
<h3>forward<a class="headerlink" href="#forward" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.forward.Forward.html#compass.ocean.tests.drying_slope.forward.Forward" title="compass.ocean.tests.drying_slope.forward.Forward"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.forward.Forward</span></code></a>
defines a step for running MPAS-Ocean from the initial condition produced in
the <code class="docutils literal notranslate"><span class="pre">initial_state</span></code> step. If <code class="docutils literal notranslate"><span class="pre">damping_coeff</span></code> is provided as an argument to
the constructor, the associate namelist option
(<code class="docutils literal notranslate"><span class="pre">config_Rayleigh_damping_coeff</span></code>) will be given this value. MPAS-Ocean is run
in <code class="docutils literal notranslate"><span class="pre">run()</span></code>. The time step is determined as a function of resolution by the
config option <code class="docutils literal notranslate"><span class="pre">dt_per_km</span></code>. The number of tasks is determined as a function
of resolution by <code class="docutils literal notranslate"><span class="pre">ntasks_baseline</span></code> and <code class="docutils literal notranslate"><span class="pre">min_tasks</span></code>.</p>
</section>
<section id="viz">
<h3>viz<a class="headerlink" href="#viz" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.viz.Viz.html#compass.ocean.tests.drying_slope.viz.Viz" title="compass.ocean.tests.drying_slope.viz.Viz"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.viz.Viz</span></code></a>
defines a visualization step which serves the purpose of validation. This
validation is tailored for the default config options and the two Rayleigh
damping coefficients set by the default sigma-coordinate test case, 0.0025 and
0.01. One plot verifies that the time evolution of the ssh forcing at the
boundary matches the analytical solution intended to drive the test case.
Another plot compares the time evolution of the ssh profile across the channel
between the analytical solution, MPAS-Ocean and ROMS. Similar plots are used
to create a movie showing the solution from MPAS-Ocean at more fine-grained
time intervals.</p>
</section>
<section id="analysis">
<h3>analysis<a class="headerlink" href="#analysis" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.analysis.Analysis.html#compass.ocean.tests.drying_slope.analysis.Analysis" title="compass.ocean.tests.drying_slope.analysis.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.analysis.Analysis</span></code></a>
produces a convergence plot for a series of forward steps at different
resolutions. It uses the analytical solution available at 5 discrete times t
compute the RMSE.</p>
</section>
</section>
<section id="default">
<span id="dev-ocean-drying-slope-default"></span><h2>default<a class="headerlink" href="#default" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.default.Default.html#compass.ocean.tests.drying_slope.default.Default" title="compass.ocean.tests.drying_slope.default.Default"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.default.Default</span></code></a>
test performs two 12-hour runs on 4 cores. It doesn’t contain any
<a class="reference internal" href="../../framework.html#dev-validation"><span class="std std-ref">Validation</span></a>. This class accepts resolution and coordinate type
<code class="docutils literal notranslate"><span class="pre">coord_type</span></code> as arguments. Both <code class="docutils literal notranslate"><span class="pre">sigma</span></code> and <code class="docutils literal notranslate"><span class="pre">single_layer</span></code> coordinate
types are supported. For <code class="docutils literal notranslate"><span class="pre">sigma</span></code> coordinates, this case is hard-coded to run
two cases at different values of <code class="docutils literal notranslate"><span class="pre">config_Rayleigh_damping_coeff</span></code>, 0.0025 and
0.01, for which there is comparison data. The <code class="docutils literal notranslate"><span class="pre">single_layer</span></code> case runs at one
value of the implicit bottom drag coefficient.</p>
</section>
<section id="convergence">
<span id="dev-ocean-drying-slope-convergence"></span><h2>convergence<a class="headerlink" href="#convergence" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.convergence.Convergence.html#compass.ocean.tests.drying_slope.convergence.Convergence" title="compass.ocean.tests.drying_slope.convergence.Convergence"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.convergence.Convergence</span></code></a> expands
on the default class to include initial and forward steps for multiple
resolutions and an analysis step to generate a convergence plot.</p>
</section>
<section id="decomp">
<span id="dev-ocean-drying-slope-decomp"></span><h2>decomp<a class="headerlink" href="#decomp" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.decomp.Decomp.html#compass.ocean.tests.drying_slope.decomp.Decomp" title="compass.ocean.tests.drying_slope.decomp.Decomp"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.decomp.Decomp</span></code></a>
test performs two 12-hour runs on 1 and 12 cores, respectively.
<a class="reference internal" href="../../framework.html#dev-validation"><span class="std std-ref">Validation</span></a> is performed by comparing the output of the two runs.
This class accepts resolution and coordinate type <code class="docutils literal notranslate"><span class="pre">coord_type</span></code> as arguments.
Both <code class="docutils literal notranslate"><span class="pre">sigma</span></code> and <code class="docutils literal notranslate"><span class="pre">single_layer</span></code> coordinate types are supported. For
<code class="docutils literal notranslate"><span class="pre">sigma</span></code> coordinates, this case is hard-coded to run with
<code class="docutils literal notranslate"><span class="pre">config_Rayleigh_damping_coeff</span></code> equal to 0.01. The <code class="docutils literal notranslate"><span class="pre">single_layer</span></code> case
runs at one value of the implicit bottom drag coefficient.</p>
</section>
<section id="loglaw">
<h2>loglaw<a class="headerlink" href="#loglaw" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/compass.ocean.tests.drying_slope.loglaw.LogLaw.html#compass.ocean.tests.drying_slope.loglaw.LogLaw" title="compass.ocean.tests.drying_slope.loglaw.LogLaw"><code class="xref py py-class docutils literal notranslate"><span class="pre">compass.ocean.tests.drying_slope.loglaw.LogLaw</span></code></a> is identical to the
default class except it uses the log-law implicit drag option.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dam_break.html" class="btn btn-neutral float-left" title="dam_break" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="global_convergence.html" class="btn btn-neutral float-right" title="global_convergence" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2013-2021,  Los Alamos National Security, LLC (LANS) (Ocean: LA-CC-13-047;Land Ice: LA-CC-13-117) and the University Corporation for Atmospheric Research (UCAR)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>