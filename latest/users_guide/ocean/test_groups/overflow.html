

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>overflow &mdash; compass latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="parabolic_bowl" href="parabolic_bowl.html" />
    <link rel="prev" title="nonhydro" href="nonhydro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            compass
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test_cases.html">Test Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test_suites.html">Test Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../landice/index.html">Landice core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean core</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Test groups</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="baroclinic_gyre.html">baroclinic_gyre</a></li>
<li class="toctree-l3"><a class="reference internal" href="buttermilk_bay.html">buttermilk_bay</a></li>
<li class="toctree-l3"><a class="reference internal" href="dam_break.html">dam_break</a></li>
<li class="toctree-l3"><a class="reference internal" href="drying_slope.html">drying_slope</a></li>
<li class="toctree-l3"><a class="reference internal" href="global_convergence.html">global_convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="global_ocean.html">global_ocean</a></li>
<li class="toctree-l3"><a class="reference internal" href="gotm.html">gotm</a></li>
<li class="toctree-l3"><a class="reference internal" href="hurricane.html">hurricane</a></li>
<li class="toctree-l3"><a class="reference internal" href="ice_shelf_2d.html">ice_shelf_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="isomip_plus.html">isomip_plus</a></li>
<li class="toctree-l3"><a class="reference internal" href="lock_exchange.html">lock_exchange</a></li>
<li class="toctree-l3"><a class="reference internal" href="merry_go_round.html">merry_go_round</a></li>
<li class="toctree-l3"><a class="reference internal" href="nonhydro.html">nonhydro</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">overflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config-options">config options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default">default</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rpe-test">rpe_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nonhydro">nonhydro</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hydro-vs-nonhydro">hydro_vs_nonhydro</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="parabolic_bowl.html">parabolic_bowl</a></li>
<li class="toctree-l3"><a class="reference internal" href="planar_convergence.html">planar_convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="soma.html">soma</a></li>
<li class="toctree-l3"><a class="reference internal" href="sphere_transport.html">sphere_transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="spherical_harmonic_transform.html">spherical_harmonic_transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="tides.html">tides</a></li>
<li class="toctree-l3"><a class="reference internal" href="utility.html">utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="ziso.html">ziso</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework/index.html">Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suites.html">Test suites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/organization.html">Organization of Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/landice/index.html">Landice core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/ocean/index.html">Ocean core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/framework.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_rrm.html">Developer Tutorial: Adding a new ocean/sea ice regionally refined mesh (RRM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_param_study.html">Developer Tutorial: Adding a parameter study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_porting_legacy.html">Developer Tutorial: Porting a legacy COMPASS test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">Code and Documentation Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">compass</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean core</a></li>
          <li class="breadcrumb-item"><a href="index.html">Test groups</a></li>
      <li class="breadcrumb-item active">overflow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/users_guide/ocean/test_groups/overflow.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overflow">
<span id="ocean-overflow"></span><h1>overflow<a class="headerlink" href="#overflow" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">ocean/overflow</span></code> test group induces a density current flowing down a
continental slope and includes four test cases.</p>
<p>The first two are based on
<a class="reference external" href="https://doi.org/10.1016/j.ocemod.2014.12.004">Petersen et al. 2015</a>.
The domain is periodic on the zonal boundaries and solid on the meridional
boundaries. Salinity is constant throughout the domain (at 35 PSU).  The
initial temperature is bimodal with low temperature throughout the continental
shelf region of 10 deg C and high temperature over the slope and deep ocean of
20 deg C. This perturbation initiates slumping of the cold, denser water mass
and flow down the slope as a bottom boundary current.</p>
<a class="reference internal image-reference" href="../../../_images/overflow.png"><img alt="../../../_images/overflow.png" class="align-center" src="../../../_images/overflow.png" style="width: 500px;" />
</a>
<p>By default, the sigma coordinate is used. There appears to be an
implementation error for other vertical coordinate options. For the default
test case, the horizontal resolution is 10 km. For the RPE test case, the
horizontal resolution is 2 km.</p>
<p>Test cases three and four have a different setup (mesh and initial conditions)
based on the MITgcm test available at
<cite>https://mitgcm.readthedocs.io/en/latest/examples/plume_on_slope/plume_on_slope.html</cite>.
The domain is 200m deep and 6.4km across, with an horizontal resolution of 20m and
60 layers in the vertical. The initial temperature is again bimodal with low
temperature throughout the continental shelf region of 10 deg C and high temperature
over the slope and deep ocean of 20 deg C. By default, the z-star coordinate system
is used. The <code class="docutils literal notranslate"><span class="pre">nonhydro</span></code> test uses the nonhydrostatic formulation and has a run duration
of 30min. The <code class="docutils literal notranslate"><span class="pre">hydro_vs_nonhydro</span></code> test compares the solutions obtained with the
hydrostatic and nonhydrostatic model after 3h.</p>
<p>All test cases have two steps, <code class="docutils literal notranslate"><span class="pre">initial_state</span></code>, which defines the mesh and initial
conditions for the model, and <code class="docutils literal notranslate"><span class="pre">forward</span></code>, which performs time integration of the model.
For the RPE test, there is an additional <code class="docutils literal notranslate"><span class="pre">analysis</span></code> step which computes the RPE through
time in relation to the initial RPE and visualizes vertical cross-sections
through the center of the domain. For the <code class="docutils literal notranslate"><span class="pre">hydro_vs_nonhydro</span></code> test, there is an additional
<code class="docutils literal notranslate"><span class="pre">visualization</span></code> step that plots the temperature profiles obtained with the
hydrostatic and nonhydrostatic model after 3h.</p>
<section id="config-options">
<h2>config options<a class="headerlink" href="#config-options" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">default</span></code> and <code class="docutils literal notranslate"><span class="pre">rpe_test</span></code> test cases share this set of config options:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># Options related to the overflow case</span>
<span class="k">[overflow]</span>

<span class="c1"># The width of the domain in the across-slope dimension (km)</span>
<span class="na">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">40</span>

<span class="c1"># The length of the domain in the along-slope dimension (km)</span>
<span class="na">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">200</span>

<span class="c1"># Viscosity values to test for rpe test case</span>
<span class="na">viscosities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1, 5, 10, 100, 1000</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">nonhydro</span></code> and <code class="docutils literal notranslate"><span class="pre">hydro_vs_nonhydro</span></code> tests share different config options:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># config options for the horizontal grid</span>
<span class="k">[horizontal_grid]</span>

<span class="c1">#Number of cells in the x-direction</span>
<span class="na">nx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">320</span>

<span class="c1">#Number of cells in the y-direction</span>
<span class="na">ny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4</span>

<span class="c1">#Distance from two cell centers</span>
<span class="na">dc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>

<span class="c1"># Options related to the vertical grid</span>
<span class="k">[vertical_grid]</span>

<span class="c1">#Depth of the bottom of the ocean</span>
<span class="na">bottom_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">200.0</span>

<span class="c1">#Number of vertical levels</span>
<span class="na">vert_levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">60</span>

<span class="c1"># the type of vertical grid</span>
<span class="na">grid_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">uniform</span>

<span class="c1"># The type of vertical coordinate (e.g. z-level, z-star)</span>
<span class="na">coord_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">z-star</span>

<span class="c1"># Whether to use &quot;partial&quot; or &quot;full&quot;, or &quot;None&quot; to not alter the topography</span>
<span class="na">partial_cell_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">None</span>

<span class="c1"># config options for the solitary wave testcase</span>
<span class="k">[hydro_vs_nonhydro]</span>

<span class="c1">#Lateral position of the shelf-break</span>
<span class="na">xs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4700.0</span>

<span class="c1">#Length-scale of the slope</span>
<span class="na">Ls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">533.3333</span>

<span class="c1">#Beta in eos</span>
<span class="na">eos_linear_beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.8</span>

<span class="c1">#Reference salinity</span>
<span class="na">eos_linear_Sref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">35.0</span>

<span class="c1">#Reference density</span>
<span class="na">eos_linear_densityref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000.0</span>

<span class="c1">#Density variation per layer</span>
<span class="na">rhoz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-2.0e-4</span>

<span class="c1">#Lower temperature</span>
<span class="na">lower_temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.0</span>

<span class="c1">#Higher temperature</span>
<span class="na">higher_temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>

<span class="c1"># config options for the solitary wave testcase</span>
<span class="k">[visualize]</span>

<span class="c1">#Time at which plotting the variables</span>
<span class="na">plotTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">6</span>
</pre></div>
</div>
</section>
<section id="default">
<h2>default<a class="headerlink" href="#default" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ocean/overflow/default</span></code> is the default version of the
overflow test case for a short (12 min) test run and validation of
prognostic variables for regression testing.</p>
</section>
<section id="rpe-test">
<h2>rpe_test<a class="headerlink" href="#rpe-test" title="Link to this heading"></a></h2>
<p>Since mixing is a strong function of horizontal viscosity, this test case
<code class="docutils literal notranslate"><span class="pre">ocean/overflow/rpe_test</span></code> performs 40-hour integrations of the model forward
in time at 5 different values of the viscosity (with steps named
<code class="docutils literal notranslate"><span class="pre">rpe_test_1_nu_1</span></code>, <code class="docutils literal notranslate"><span class="pre">rpe_test_2_nu_5</span></code>, etc.). Results of these tests have
been used to evaluate spurious dissipation in relation to different models and
vertical grid choices
(<a class="reference external" href="https://doi.org/10.1016/j.ocemod.2014.12.004">Petersen et al. 2015</a>).</p>
</section>
<section id="nonhydro">
<h2>nonhydro<a class="headerlink" href="#nonhydro" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ocean/overflow/nonhydro</span></code> uses the nonhydrostatic formulation. After the mesh and
initial conditions are generated, the nonhydrostatic model is run for 30min using
the RK4 time-stepping scheme with a time-step of 0.5s.</p>
</section>
<section id="hydro-vs-nonhydro">
<h2>hydro_vs_nonhydro<a class="headerlink" href="#hydro-vs-nonhydro" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ocean/overflow/hydro_vs_nonhydro</span></code> compares the solutions obtained with
the hydrostatic and nonhydrostatic model. After the creation of the mesh
and initial conditions, an hydrostatic and a nonhydrostatic simulation
are run using the RK4 time-stepping scheme with a time-step of 0.5s.
The temperature profile at 3h is plotted for the hydrostatic
and nonhydrostatic case. The plot shows that a Kelvin-Helmholtz instability
develops in the nonhydrostatic case, leading to entrainment of
ambient fluid into plumes, whereas the hydrostatic model fails to
capture the correct physics.</p>
<img alt="../../../_images/overflow_nonhydro.png" class="align-center" src="../../../_images/overflow_nonhydro.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nonhydro.html" class="btn btn-neutral float-left" title="nonhydro" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="parabolic_bowl.html" class="btn btn-neutral float-right" title="parabolic_bowl" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2013-2021,  Los Alamos National Security, LLC (LANS) (Ocean: LA-CC-13-047;Land Ice: LA-CC-13-117) and the University Corporation for Atmospheric Research (UCAR)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>